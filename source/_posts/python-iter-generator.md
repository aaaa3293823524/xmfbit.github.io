---
title: Python中的迭代器和生成器
date: 2017-04-21 15:53:23
tags:
     - python
---
在STL中，迭代器可以剥离算法和具体数据类型之间的耦合，使得库的维护者只需要为特定的迭代器（如前向迭代器，反向迭代器和随机迭代器）等实现算法即可，而不用关心具体的数据结构。在Python中，迭代器更是无处不在。这篇博客简要介绍Python中的迭代器和生成器，它们背后的原理以及如何实现一个自定义的迭代器/生成器。

<!-- more -->

## 迭代器
使用`for`循环时，常常遇到迭代器。如下所示，可能是最常用的一种方式。

```
for i in range(100):
    # do something 100 times
```

在Python中，凡是可迭代的对象（Iterable Object），都可以用上面的方式进行迭代循环。例如，当被迭代对象是字符串时，每次得到的是字符串中的单个字符；当被迭代对象是文本文件时，每次得到的是文件中每一行的字符串；当被迭代对象是字典时，每次得到的是字典的`key`。

同样，也有很多函数接受的参数为可迭代对象。例如`list()`和`tuple()`，当传入的参数为刻碟带对象时，返回的是由迭代返回值组成的列表或者元组。例如

```
list({'x':1, 'y':2})  # => ['x', 'y']
```

为什么`list`或者`str`这样的可迭代对象能够被迭代呢？或者，自定义的类满足什么条件，就可以用`for x in XXX`这种方法来遍历了呢？我们只需要在这个类内实现`__iter__()`方法，返回迭代器对象。

对应地，在Python中，有内建的函数`iter()`和`next()`。一般用法时，`iter()`方法接受一个可迭代对象，

如下面的例子，
